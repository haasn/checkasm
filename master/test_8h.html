<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>checkasm: test.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">checkasm<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Assembly testing and benchmarking framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('test_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">test.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test writing API for checkasm. </p>
<p>This header provides the API used within test functions to declare, call, report, and benchmark different implementations of functions. </p>
</div>
<p><a href="test_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:CheckasmPerf" id="r_CheckasmPerf"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCheckasmPerf.html">CheckasmPerf</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af89e132503dee480bf6d778f61046083" id="r_af89e132503dee480bf6d778f61046083"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(func, ...)</td></tr>
<tr class="memdesc:af89e132503dee480bf6d778f61046083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a function should be tested and set up function references.  <br /></td></tr>
<tr class="memitem:a771deac0c048cccc98cf872c7a8d36a3" id="r_a771deac0c048cccc98cf872c7a8d36a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a771deac0c048cccc98cf872c7a8d36a3">checkasm_fail</a>()</td></tr>
<tr class="memdesc:a771deac0c048cccc98cf872c7a8d36a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the current test as failed.  <br /></td></tr>
<tr class="memitem:ac14b1acf6ab5851e8fe157b833dbd0a9" id="r_ac14b1acf6ab5851e8fe157b833dbd0a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a>(ret, ...)</td></tr>
<tr class="memdesc:ac14b1acf6ab5851e8fe157b833dbd0a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a function signature for testing.  <br /></td></tr>
<tr class="memitem:a3f7a0ce2c9ff46c217767cd2126de1fc" id="r_a3f7a0ce2c9ff46c217767cd2126de1fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f7a0ce2c9ff46c217767cd2126de1fc">checkasm_declare_emms</a>(cpu_flags,  ret, ...)</td></tr>
<tr class="memdesc:a3f7a0ce2c9ff46c217767cd2126de1fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare signature for non-ABI compliant MMX functions (x86 only)  <br /></td></tr>
<tr class="memitem:a3e7ac86f780a40ccb5bea811092f2fba" id="r_a3e7ac86f780a40ccb5bea811092f2fba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e7ac86f780a40ccb5bea811092f2fba">checkasm_call</a>(func, ...)</td></tr>
<tr class="memdesc:a3e7ac86f780a40ccb5bea811092f2fba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call a function with signal handling.  <br /></td></tr>
<tr class="memitem:aaa899f97e924bbe86341b2c2e4fd161d" id="r_aaa899f97e924bbe86341b2c2e4fd161d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d">checkasm_call_checked</a>(func, ...)</td></tr>
<tr class="memdesc:aaa899f97e924bbe86341b2c2e4fd161d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call an assembly function with full validation.  <br /></td></tr>
<tr class="memitem:a13b6395033f856b633f1d2e7a5f81951" id="r_a13b6395033f856b633f1d2e7a5f81951"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13b6395033f856b633f1d2e7a5f81951">checkasm_func_ref</a>&#160;&#160;&#160;((func_type *) <a class="el" href="#a311c987a2fc5ea2ab260151ace94e88d">checkasm_key_ref</a>)</td></tr>
<tr class="memdesc:a13b6395033f856b633f1d2e7a5f81951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer to the reference implementation.  <br /></td></tr>
<tr class="memitem:ae901368af62c0c626ec36aa75bbf4de1" id="r_ae901368af62c0c626ec36aa75bbf4de1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae901368af62c0c626ec36aa75bbf4de1">checkasm_func_new</a>&#160;&#160;&#160;((func_type *) <a class="el" href="#a5b65929b4b7cbb7f434111043f0717fc">checkasm_key_new</a>)</td></tr>
<tr class="memdesc:ae901368af62c0c626ec36aa75bbf4de1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer to the implementation being tested.  <br /></td></tr>
<tr class="memitem:a22fdeb651a1cc4ecddaef384da98dada" id="r_a22fdeb651a1cc4ecddaef384da98dada"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a>(...)</td></tr>
<tr class="memdesc:a22fdeb651a1cc4ecddaef384da98dada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the reference implementation.  <br /></td></tr>
<tr class="memitem:abca61f0321c4258cdc5203c9396fd51a" id="r_abca61f0321c4258cdc5203c9396fd51a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a>(...)</td></tr>
<tr class="memdesc:abca61f0321c4258cdc5203c9396fd51a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the implementation being tested with validation.  <br /></td></tr>
<tr class="memitem:a69d95c550ee6a2e05b3b1ae88b2d0610" id="r_a69d95c550ee6a2e05b3b1ae88b2d0610"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a69d95c550ee6a2e05b3b1ae88b2d0610">checkasm_bench</a>(func, ...)</td></tr>
<tr class="memdesc:a69d95c550ee6a2e05b3b1ae88b2d0610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Benchmark a function.  <br /></td></tr>
<tr class="memitem:a012d866e2f2a5f5ede4b9c2765248e28" id="r_a012d866e2f2a5f5ede4b9c2765248e28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a>(...)</td></tr>
<tr class="memdesc:a012d866e2f2a5f5ede4b9c2765248e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Benchmark the optimized implementation.  <br /></td></tr>
<tr class="memitem:a6f2afbd0d6c3ba180d49cc9396543463" id="r_a6f2afbd0d6c3ba180d49cc9396543463"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f2afbd0d6c3ba180d49cc9396543463">checkasm_alternate</a>(a,  b)</td></tr>
<tr class="memdesc:a6f2afbd0d6c3ba180d49cc9396543463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternate between two values during benchmarking.  <br /></td></tr>
<tr class="memitem:ga20b7be2029dc5488a8fba5d405b737d8" id="r_ga20b7be2029dc5488a8fba5d405b737d8"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>fail</b>&#160;&#160;&#160;<a class="el" href="#a771deac0c048cccc98cf872c7a8d36a3">checkasm_fail</a></td></tr>
<tr class="memitem:gaaab1e1251312279029290f41c18342d2" id="r_gaaab1e1251312279029290f41c18342d2"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>report</b>&#160;&#160;&#160;<a class="el" href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a></td></tr>
<tr class="memitem:ga67049762865e34f6f8e1aea7650771da" id="r_ga67049762865e34f6f8e1aea7650771da"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>check_func</b>&#160;&#160;&#160;<a class="el" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a></td></tr>
<tr class="memitem:ga391557dbd72903577960ae5dd4868523" id="r_ga391557dbd72903577960ae5dd4868523"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>func_ref</b>&#160;&#160;&#160;<a class="el" href="#a13b6395033f856b633f1d2e7a5f81951">checkasm_func_ref</a></td></tr>
<tr class="memitem:ga78e59c9b426428c18dc934bc973c1e89" id="r_ga78e59c9b426428c18dc934bc973c1e89"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>func_new</b>&#160;&#160;&#160;<a class="el" href="#ae901368af62c0c626ec36aa75bbf4de1">checkasm_func_new</a></td></tr>
<tr class="memitem:ga86120b72e1f7dd3b28d2fdc84dee1907" id="r_ga86120b72e1f7dd3b28d2fdc84dee1907"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>call_ref</b>&#160;&#160;&#160;<a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a></td></tr>
<tr class="memitem:ga76b912ad56492ed03024c31598864d7f" id="r_ga76b912ad56492ed03024c31598864d7f"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>call_new</b>&#160;&#160;&#160;<a class="el" href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a></td></tr>
<tr class="memitem:ga52fbf34a0077d92000b709fad8ce2e74" id="r_ga52fbf34a0077d92000b709fad8ce2e74"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>bench_new</b>&#160;&#160;&#160;<a class="el" href="#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a></td></tr>
<tr class="memitem:ga14f7fdf466f4063458dd760b065a8f2e" id="r_ga14f7fdf466f4063458dd760b065a8f2e"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>alternate</b>&#160;&#160;&#160;<a class="el" href="#a6f2afbd0d6c3ba180d49cc9396543463">checkasm_alternate</a></td></tr>
<tr class="memitem:ga0a65df8849bce9ba0f1ec9d94f831595" id="r_ga0a65df8849bce9ba0f1ec9d94f831595"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>declare_func</b>&#160;&#160;&#160;<a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a></td></tr>
<tr class="memitem:gab997c53b28f925ed70836140a182e139" id="r_gab997c53b28f925ed70836140a182e139"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><b>declare_func_emms</b>&#160;&#160;&#160;<a class="el" href="#a3f7a0ce2c9ff46c217767cd2126de1fc">checkasm_declare_emms</a></td></tr>
<tr class="memitem:gad386b5da3d0606d4692607b831d71fb3" id="r_gad386b5da3d0606d4692607b831d71fb3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gad386b5da3d0606d4692607b831d71fb3">checkasm_clear_cpu_state</a>()</td></tr>
<tr class="memdesc:gad386b5da3d0606d4692607b831d71fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear CPU state after running a function.  <br /></td></tr>
<tr class="memitem:gad225bc02b4c8a82a8d42e7ff61174c7c" id="r_gad225bc02b4c8a82a8d42e7ff61174c7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gad225bc02b4c8a82a8d42e7ff61174c7c">CHECKASM_PERF_CALL4</a>(...)</td></tr>
<tr class="memitem:ga8f39a59476c369de4987f596628de9e6" id="r_ga8f39a59476c369de4987f596628de9e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga8f39a59476c369de4987f596628de9e6">CHECKASM_PERF_CALL16</a>(...)</td></tr>
<tr class="memitem:gadd104faf5d01d0a7fc1d4fd5a23e03e8" id="r_gadd104faf5d01d0a7fc1d4fd5a23e03e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gadd104faf5d01d0a7fc1d4fd5a23e03e8">CHECKASM_PERF_BENCH_SIMPLE</a>(count,  time, ...)</td></tr>
<tr class="memitem:gae8ec26bad76f010b7977920f9131506b" id="r_gae8ec26bad76f010b7977920f9131506b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gae8ec26bad76f010b7977920f9131506b">CHECKASM_PERF_BENCH_ASM</a>(total_count,  time, ...)</td></tr>
<tr class="memitem:gae6f434f62657d59250b1d76dc9c1dc7e" id="r_gae6f434f62657d59250b1d76dc9c1dc7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gae6f434f62657d59250b1d76dc9c1dc7e">CHECKASM_PERF_BENCH</a>(count,  time, ...)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a648d0f2de88d6aba7a1a99418b8f07ec" id="r_a648d0f2de88d6aba7a1a99418b8f07ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a648d0f2de88d6aba7a1a99418b8f07ec">checkasm_fail_func</a> (const char *msg,...) <a class="el" href="attributes_8h.html#a0897f3510e02dd845bea9db09a466eba">CHECKASM_PRINTF</a>(1</td></tr>
<tr class="memdesc:a648d0f2de88d6aba7a1a99418b8f07ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the current function as failed with a custom message.  <br /></td></tr>
<tr class="memitem:a62b0579d89e3dff6c36448d06b393505" id="r_a62b0579d89e3dff6c36448d06b393505"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a> (const char *name,...) <a class="el" href="attributes_8h.html#a0897f3510e02dd845bea9db09a466eba">CHECKASM_PRINTF</a>(1</td></tr>
<tr class="memdesc:a62b0579d89e3dff6c36448d06b393505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report test outcome for a named group of functions.  <br /></td></tr>
<tr class="memitem:a99afe9b6008a0ffba23777d119de0d6f" id="r_a99afe9b6008a0ffba23777d119de0d6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99afe9b6008a0ffba23777d119de0d6f">checkasm_should_fail</a> (<a class="el" href="checkasm_8h.html#a0a3a32a2daca43a3aa11a4d067eddb8a">CheckasmCpu</a> cpu_flags)</td></tr>
<tr class="memdesc:a99afe9b6008a0ffba23777d119de0d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a block of tests as expected to fail.  <br /></td></tr>
<tr class="memitem:ga94cee9b8904d7423f190c53e5f88a712" id="r_ga94cee9b8904d7423f190c53e5f88a712"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> <a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga94cee9b8904d7423f190c53e5f88a712">checkasm_check_key</a> (<a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a> version, const char *name,...) <a class="el" href="attributes_8h.html#a0897f3510e02dd845bea9db09a466eba">CHECKASM_PRINTF</a>(2</td></tr>
<tr class="memdesc:ga94cee9b8904d7423f190c53e5f88a712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal implementation of <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>  <br /></td></tr>
<tr class="memitem:ga9b2ca4b22ddfe774676d952e9ba435ed" id="r_ga9b2ca4b22ddfe774676d952e9ba435ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> <a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a> <a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga9b2ca4b22ddfe774676d952e9ba435ed">checkasm_set_signal_handler_state</a> (int enabled)</td></tr>
<tr class="memdesc:ga9b2ca4b22ddfe774676d952e9ba435ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable signal handling.  <br /></td></tr>
<tr class="memitem:gac7de651fa8a4c075643f4e77ecfef6bf" id="r_gac7de651fa8a4c075643f4e77ecfef6bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gac7de651fa8a4c075643f4e77ecfef6bf">checkasm_push_stack_guard</a> (uintptr_t guard[2])</td></tr>
<tr class="memdesc:gac7de651fa8a4c075643f4e77ecfef6bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push stack guard values for corruption detection.  <br /></td></tr>
<tr class="memitem:gaa8844753dc1ae885e1b7f09ef932f141" id="r_gaa8844753dc1ae885e1b7f09ef932f141"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><b>checkasm_pop_stack_guard</b> (void)</td></tr>
<tr class="memitem:ga2980a6af4d4e916fab117507b8f90a60" id="r_ga2980a6af4d4e916fab117507b8f90a60"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> const <a class="el" href="structCheckasmPerf.html">CheckasmPerf</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>checkasm_get_perf</b> (void)</td></tr>
<tr class="memitem:ga36759be219847b69c2a2e661cd2d262c" id="r_ga36759be219847b69c2a2e661cd2d262c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga36759be219847b69c2a2e661cd2d262c">checkasm_bench_func</a> (void)</td></tr>
<tr class="memdesc:ga36759be219847b69c2a2e661cd2d262c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if current function should be benchmarked.  <br /></td></tr>
<tr class="memitem:gab897e3201799c0bc3a5c7ff1cf379425" id="r_gab897e3201799c0bc3a5c7ff1cf379425"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gab897e3201799c0bc3a5c7ff1cf379425">checkasm_bench_runs</a> (void)</td></tr>
<tr class="memdesc:gab897e3201799c0bc3a5c7ff1cf379425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of iterations for current benchmark run.  <br /></td></tr>
<tr class="memitem:ga6ebc6985dce9c0789e9b4707d6a05ed9" id="r_ga6ebc6985dce9c0789e9b4707d6a05ed9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga6ebc6985dce9c0789e9b4707d6a05ed9">checkasm_bench_update</a> (int iterations, uint64_t cycles)</td></tr>
<tr class="memdesc:ga6ebc6985dce9c0789e9b4707d6a05ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update benchmark statistics with timing results.  <br /></td></tr>
<tr class="memitem:ga66198a3187e7668b508f13afe744da95" id="r_ga66198a3187e7668b508f13afe744da95"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><b>checkasm_bench_finish</b> (void)</td></tr>
<tr class="memdesc:ga66198a3187e7668b508f13afe744da95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize and store benchmark results. <br /></td></tr>
<tr class="memitem:ga3f119cec011f017092cd03ebb08f64f8" id="r_ga3f119cec011f017092cd03ebb08f64f8"><td class="memItemLeft" align="right" valign="top">
static void&#160;</td><td class="memItemRight" valign="bottom"><b>checkasm_unused</b> (void)</td></tr>
<tr class="memdesc:ga3f119cec011f017092cd03ebb08f64f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suppress unused variable warnings. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a311c987a2fc5ea2ab260151ace94e88d" id="r_a311c987a2fc5ea2ab260151ace94e88d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a311c987a2fc5ea2ab260151ace94e88d">checkasm_key_ref</a></td></tr>
<tr class="memdesc:a311c987a2fc5ea2ab260151ace94e88d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key identifying the reference implementation.  <br /></td></tr>
<tr class="memitem:a5b65929b4b7cbb7f434111043f0717fc" id="r_a5b65929b4b7cbb7f434111043f0717fc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b65929b4b7cbb7f434111043f0717fc">checkasm_key_new</a></td></tr>
<tr class="memdesc:a5b65929b4b7cbb7f434111043f0717fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key identifying the implementation being tested.  <br /></td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a6f2afbd0d6c3ba180d49cc9396543463" name="a6f2afbd0d6c3ba180d49cc9396543463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2afbd0d6c3ba180d49cc9396543463">&#9670;&#160;</a></span>checkasm_alternate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_alternate</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>a</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>b</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((tidx &amp; 1) ? (b) : (a))</div>
</div><!-- fragment -->
<p>Alternate between two values during benchmarking. </p>
<p>Returns one of two values, alternating between them across benchmark iterations. Intended for use within bench_new() calls for functions that modify their input buffers. This ensures throughput (not latency) is measured by preventing data dependencies between iterations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>First value </td></tr>
    <tr><td class="paramname">b</td><td>Second value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Either a or b depending on the current benchmark iteration</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint8_t buf0[SIZE]);</div>
<div class="line"><a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint8_t buf1[SIZE]);</div>
<div class="line">bench_new(alternate(buf0, buf1), size);</div>
<div class="line"><span class="comment">// Each iteration uses a different buffer, preventing stalls</span></div>
<div class="ttc" id="agroup__bufcmp_html_gaf24227824feb841da0ad5b245c89cbf3"><div class="ttname"><a href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a></div><div class="ttdeci">#define CHECKASM_ALIGN(x)</div><div class="ttdoc">Declare a variable with platform-specific alignment requirements.</div><div class="ttdef"><b>Definition</b> utils.h:408</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a69d95c550ee6a2e05b3b1ae88b2d0610" name="a69d95c550ee6a2e05b3b1ae88b2d0610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d95c550ee6a2e05b3b1ae88b2d0610">&#9670;&#160;</a></span>checkasm_bench</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_bench</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>func</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                                                                 \</div>
<div class="line">        if (<a class="code hl_function" href="group__internal.html#ga36759be219847b69c2a2e661cd2d262c">checkasm_bench_func</a>()) {                                                     \</div>
<div class="line">            func_type *<span class="keyword">const</span> bench_func = (func);                                        \</div>
<div class="line">            checkasm_set_signal_handler_state(1);                                        \</div>
<div class="line">            for (<span class="keywordtype">int</span> truns; (truns = <a class="code hl_function" href="group__internal.html#gab897e3201799c0bc3a5c7ff1cf379425">checkasm_bench_runs</a>());) {                          \</div>
<div class="line">                uint64_t time;                                                           \</div>
<div class="line">                CHECKASM_PERF_BENCH(truns, time, __VA_ARGS__);                           \</div>
<div class="line">                checkasm_clear_cpu_state();                                              \</div>
<div class="line">                checkasm_bench_update(truns, time);                                      \</div>
<div class="line">            }                                                                            \</div>
<div class="line">            checkasm_set_signal_handler_state(0);                                        \</div>
<div class="line">            checkasm_bench_finish();                                                     \</div>
<div class="line">        } <span class="keywordflow">else</span> {                                                                         \</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">int</span> tidx = 0;                                                          \</div>
<div class="line">            (void) tidx;                                                                 \</div>
<div class="line">            checkasm_call_checked(func, __VA_ARGS__);                                    \</div>
<div class="line">        }                                                                                \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="agroup__internal_html_ga36759be219847b69c2a2e661cd2d262c"><div class="ttname"><a href="group__internal.html#ga36759be219847b69c2a2e661cd2d262c">checkasm_bench_func</a></div><div class="ttdeci">CHECKASM_API int checkasm_bench_func(void)</div><div class="ttdoc">Check if current function should be benchmarked.</div></div>
<div class="ttc" id="agroup__internal_html_gab897e3201799c0bc3a5c7ff1cf379425"><div class="ttname"><a href="group__internal.html#gab897e3201799c0bc3a5c7ff1cf379425">checkasm_bench_runs</a></div><div class="ttdeci">CHECKASM_API int checkasm_bench_runs(void)</div><div class="ttdoc">Get number of iterations for current benchmark run.</div></div>
</div><!-- fragment -->
<p>Benchmark a function. </p>
<p>Repeatedly calls a function to measure its performance. If benchmarking is enabled, runs the function many times and collects timing statistics. If benchmarking is disabled, simply calls the function once with validation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Function pointer to benchmark </td></tr>
    <tr><td class="paramname">...</td><td>Arguments to pass to the function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function may be called multiple times within the same <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> block. If done, the timing results will be accumulated and reported as a geometric mean. This is useful for benchmarking multiple different input sizes or configurations that should be reported as a single average figure.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a012d866e2f2a5f5ede4b9c2765248e28" title="Benchmark the optimized implementation.">checkasm_bench_new()</a>, <a class="el" href="#a6f2afbd0d6c3ba180d49cc9396543463" title="Alternate between two values during benchmarking.">checkasm_alternate()</a> </dd></dl>

</div>
</div>
<a id="a012d866e2f2a5f5ede4b9c2765248e28" name="a012d866e2f2a5f5ede4b9c2765248e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a012d866e2f2a5f5ede4b9c2765248e28">&#9670;&#160;</a></span>checkasm_bench_new</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_bench_new</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code hl_define" href="#a69d95c550ee6a2e05b3b1ae88b2d0610">checkasm_bench</a>(<a class="code hl_define" href="#ae901368af62c0c626ec36aa75bbf4de1">checkasm_func_new</a>, __VA_ARGS__)</div>
<div class="ttc" id="atest_8h_html_a69d95c550ee6a2e05b3b1ae88b2d0610"><div class="ttname"><a href="#a69d95c550ee6a2e05b3b1ae88b2d0610">checkasm_bench</a></div><div class="ttdeci">#define checkasm_bench(func,...)</div><div class="ttdoc">Benchmark a function.</div><div class="ttdef"><b>Definition</b> test.h:357</div></div>
<div class="ttc" id="atest_8h_html_ae901368af62c0c626ec36aa75bbf4de1"><div class="ttname"><a href="#ae901368af62c0c626ec36aa75bbf4de1">checkasm_func_new</a></div><div class="ttdeci">#define checkasm_func_new</div><div class="ttdoc">Function pointer to the implementation being tested.</div><div class="ttdef"><b>Definition</b> test.h:307</div></div>
</div><!-- fragment -->
<p>Benchmark the optimized implementation. </p>
<p>Convenience macro that benchmarks the optimized implementation set up by <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>. Equivalent to <a class="el" href="#a69d95c550ee6a2e05b3b1ae88b2d0610" title="Benchmark a function.">checkasm_bench(checkasm_func_new, ...)</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">...</td><td>Arguments to pass to the function</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_define" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(get_my_func(<a class="code hl_function" href="checkasm_8h.html#ac576caad7a9c4333b1b3f34c345ca48b">checkasm_get_cpu_flags</a>()), <span class="stringliteral">&quot;my_func&quot;</span>)) {</div>
<div class="line">    <span class="comment">// Test correctness</span></div>
<div class="line">    <a class="code hl_define" href="#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a>(output_ref, input);</div>
<div class="line">    <a class="code hl_define" href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a>(output_new, input);</div>
<div class="line">    <a class="code hl_define" href="group__bufcmp.html#gaa1b1c38ee8da84d7a12c2171868c8e1d">checkasm_check</a>(type, output_ref, output_new);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Benchmark performance</span></div>
<div class="line">    <a class="code hl_define" href="#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a>(output_new, input);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a>(<span class="stringliteral">&quot;my_func&quot;</span>);</div>
<div class="ttc" id="acheckasm_8h_html_ac576caad7a9c4333b1b3f34c345ca48b"><div class="ttname"><a href="checkasm_8h.html#ac576caad7a9c4333b1b3f34c345ca48b">checkasm_get_cpu_flags</a></div><div class="ttdeci">CHECKASM_API CheckasmCpu checkasm_get_cpu_flags(void)</div><div class="ttdoc">Get the current active set of CPU flags.</div></div>
<div class="ttc" id="agroup__bufcmp_html_gaa1b1c38ee8da84d7a12c2171868c8e1d"><div class="ttname"><a href="group__bufcmp.html#gaa1b1c38ee8da84d7a12c2171868c8e1d">checkasm_check</a></div><div class="ttdeci">#define checkasm_check(type,...)</div><div class="ttdoc">Compare two 2D buffers and fail test if different.</div><div class="ttdef"><b>Definition</b> utils.h:480</div></div>
<div class="ttc" id="atest_8h_html_a012d866e2f2a5f5ede4b9c2765248e28"><div class="ttname"><a href="#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a></div><div class="ttdeci">#define checkasm_bench_new(...)</div><div class="ttdoc">Benchmark the optimized implementation.</div><div class="ttdef"><b>Definition</b> test.h:401</div></div>
<div class="ttc" id="atest_8h_html_a22fdeb651a1cc4ecddaef384da98dada"><div class="ttname"><a href="#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a></div><div class="ttdeci">#define checkasm_call_ref(...)</div><div class="ttdoc">Call the reference implementation.</div><div class="ttdef"><b>Definition</b> test.h:321</div></div>
<div class="ttc" id="atest_8h_html_a62b0579d89e3dff6c36448d06b393505"><div class="ttname"><a href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a></div><div class="ttdeci">CHECKASM_API void checkasm_report(const char *name,...) CHECKASM_PRINTF(1</div><div class="ttdoc">Report test outcome for a named group of functions.</div></div>
<div class="ttc" id="atest_8h_html_abca61f0321c4258cdc5203c9396fd51a"><div class="ttname"><a href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a></div><div class="ttdeci">#define checkasm_call_new(...)</div><div class="ttdoc">Call the implementation being tested with validation.</div><div class="ttdef"><b>Definition</b> test.h:336</div></div>
<div class="ttc" id="atest_8h_html_af89e132503dee480bf6d778f61046083"><div class="ttname"><a href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a></div><div class="ttdeci">#define checkasm_check_func(func,...)</div><div class="ttdoc">Check if a function should be tested and set up function references.</div><div class="ttdef"><b>Definition</b> test.h:76</div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="#a69d95c550ee6a2e05b3b1ae88b2d0610" title="Benchmark a function.">checkasm_bench()</a>, <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> </dd></dl>

</div>
</div>
<a id="a3e7ac86f780a40ccb5bea811092f2fba" name="a3e7ac86f780a40ccb5bea811092f2fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7ac86f780a40ccb5bea811092f2fba">&#9670;&#160;</a></span>checkasm_call</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_call</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>func</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (<a class="code hl_function" href="group__internal.html#ga9b2ca4b22ddfe774676d952e9ba435ed">checkasm_set_signal_handler_state</a>(1), (func) (__VA_ARGS__));                        \</div>
<div class="line">    checkasm_set_signal_handler_state(0)</div>
<div class="ttc" id="agroup__internal_html_ga9b2ca4b22ddfe774676d952e9ba435ed"><div class="ttname"><a href="group__internal.html#ga9b2ca4b22ddfe774676d952e9ba435ed">checkasm_set_signal_handler_state</a></div><div class="ttdeci">CHECKASM_API CheckasmKey CHECKASM_API void checkasm_set_signal_handler_state(int enabled)</div><div class="ttdoc">Enable or disable signal handling.</div></div>
</div><!-- fragment -->
<p>Call a function with signal handling. </p>
<p>Calls an arbitrary function while handling signals (crashes, segfaults, etc.). Use this for calling the reference implementation or other nominally-safe code. For testing assembly/optimized implementations, use <a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a> instead, which provides additional validation for common assembly mistakes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Function pointer to call </td></tr>
    <tr><td class="paramname">...</td><td>Arguments to pass to the function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This only handles signals; use <a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a> for full validation. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a> </dd></dl>

</div>
</div>
<a id="aaa899f97e924bbe86341b2c2e4fd161d" name="aaa899f97e924bbe86341b2c2e4fd161d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa899f97e924bbe86341b2c2e4fd161d">&#9670;&#160;</a></span>checkasm_call_checked</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_call_checked</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>func</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">      (<a class="code hl_function" href="group__internal.html#ga9b2ca4b22ddfe774676d952e9ba435ed">checkasm_set_signal_handler_state</a>(1),                                             \</div>
<div class="line">       checkasm_push_stack_guard((uintptr_t[16]) { 0, 0 }),                              \</div>
<div class="line">       ((func_type *) (func))(__VA_ARGS__));                                             \</div>
<div class="line">      checkasm_pop_stack_guard();                                                        \</div>
<div class="line">      checkasm_set_signal_handler_state(0)</div>
</div><!-- fragment -->
<p>Call an assembly function with full validation. </p>
<p>Calls an assembly/optimized function (matching the signature declared by <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>) while handling signals and checking for common assembly errors like stack corruption, clobbered registers, register size mismatches and ABI violations. Use this for calling the implementation being tested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Function pointer to call (must match declared signature) </td></tr>
    <tr><td class="paramname">...</td><td>Arguments to pass to the function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Requires prior call to <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>, <a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada" title="Call the reference implementation.">checkasm_call_ref()</a>, <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a> </dd></dl>

</div>
</div>
<a id="abca61f0321c4258cdc5203c9396fd51a" name="abca61f0321c4258cdc5203c9396fd51a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca61f0321c4258cdc5203c9396fd51a">&#9670;&#160;</a></span>checkasm_call_new</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_call_new</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code hl_define" href="#aaa899f97e924bbe86341b2c2e4fd161d">checkasm_call_checked</a>(<a class="code hl_define" href="#ae901368af62c0c626ec36aa75bbf4de1">checkasm_func_new</a>, __VA_ARGS__)</div>
<div class="ttc" id="atest_8h_html_aaa899f97e924bbe86341b2c2e4fd161d"><div class="ttname"><a href="#aaa899f97e924bbe86341b2c2e4fd161d">checkasm_call_checked</a></div><div class="ttdeci">#define checkasm_call_checked(func,...)</div><div class="ttdoc">Call an assembly function with full validation.</div><div class="ttdef"><b>Definition</b> test.h:229</div></div>
</div><!-- fragment -->
<p>Call the implementation being tested with validation. </p>
<p>Calls the optimized implementation being tested with the specified arguments, including full validation for register clobbering, stack corruption, etc. Must be preceded by a successful <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">...</td><td>Arguments to pass to the function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return value from the optimized implementation</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>, <a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada" title="Call the reference implementation.">checkasm_call_ref()</a> </dd></dl>

</div>
</div>
<a id="a22fdeb651a1cc4ecddaef384da98dada" name="a22fdeb651a1cc4ecddaef384da98dada"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22fdeb651a1cc4ecddaef384da98dada">&#9670;&#160;</a></span>checkasm_call_ref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_call_ref</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code hl_define" href="#a3e7ac86f780a40ccb5bea811092f2fba">checkasm_call</a>(<a class="code hl_define" href="#a13b6395033f856b633f1d2e7a5f81951">checkasm_func_ref</a>, __VA_ARGS__)</div>
<div class="ttc" id="atest_8h_html_a13b6395033f856b633f1d2e7a5f81951"><div class="ttname"><a href="#a13b6395033f856b633f1d2e7a5f81951">checkasm_func_ref</a></div><div class="ttdeci">#define checkasm_func_ref</div><div class="ttdoc">Function pointer to the reference implementation.</div><div class="ttdef"><b>Definition</b> test.h:293</div></div>
<div class="ttc" id="atest_8h_html_a3e7ac86f780a40ccb5bea811092f2fba"><div class="ttname"><a href="#a3e7ac86f780a40ccb5bea811092f2fba">checkasm_call</a></div><div class="ttdeci">#define checkasm_call(func,...)</div><div class="ttdoc">Call a function with signal handling.</div><div class="ttdef"><b>Definition</b> test.h:209</div></div>
</div><!-- fragment -->
<p>Call the reference implementation. </p>
<p>Calls the reference (C) implementation with the specified arguments. Must be preceded by a successful <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">...</td><td>Arguments to pass to the function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return value from the reference implementation</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>, <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a> </dd></dl>

</div>
</div>
<a id="af89e132503dee480bf6d778f61046083" name="af89e132503dee480bf6d778f61046083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af89e132503dee480bf6d778f61046083">&#9670;&#160;</a></span>checkasm_check_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_check_func</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>func</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (<a class="code hl_variable" href="#a311c987a2fc5ea2ab260151ace94e88d">checkasm_key_ref</a>                                                                    \</div>
<div class="line">     = <a class="code hl_function" href="group__internal.html#ga94cee9b8904d7423f190c53e5f88a712">checkasm_check_key</a>((<a class="code hl_variable" href="#a5b65929b4b7cbb7f434111043f0717fc">checkasm_key_new</a> = (<a class="code hl_typedef" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a>) (func)), __VA_ARGS__))</div>
<div class="ttc" id="acheckasm_8h_html_a38851849348fabd0acd8d30b61feeb8c"><div class="ttname"><a href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a></div><div class="ttdeci">uintptr_t CheckasmKey</div><div class="ttdoc">Opaque type used to identify function implementations.</div><div class="ttdef"><b>Definition</b> checkasm.h:60</div></div>
<div class="ttc" id="agroup__internal_html_ga94cee9b8904d7423f190c53e5f88a712"><div class="ttname"><a href="group__internal.html#ga94cee9b8904d7423f190c53e5f88a712">checkasm_check_key</a></div><div class="ttdeci">CHECKASM_API CheckasmKey checkasm_check_key(CheckasmKey version, const char *name,...) CHECKASM_PRINTF(2</div><div class="ttdoc">Internal implementation of checkasm_check_func()</div></div>
<div class="ttc" id="atest_8h_html_a311c987a2fc5ea2ab260151ace94e88d"><div class="ttname"><a href="#a311c987a2fc5ea2ab260151ace94e88d">checkasm_key_ref</a></div><div class="ttdeci">static CheckasmKey checkasm_key_ref</div><div class="ttdoc">Key identifying the reference implementation.</div><div class="ttdef"><b>Definition</b> test.h:273</div></div>
<div class="ttc" id="atest_8h_html_a5b65929b4b7cbb7f434111043f0717fc"><div class="ttname"><a href="#a5b65929b4b7cbb7f434111043f0717fc">checkasm_key_new</a></div><div class="ttdeci">static CheckasmKey checkasm_key_new</div><div class="ttdoc">Key identifying the implementation being tested.</div><div class="ttdef"><b>Definition</b> test.h:282</div></div>
</div><!-- fragment -->
<p>Check if a function should be tested and set up function references. </p>
<p>Determines if the given function implementation should be tested, and if so, sets up the function pointers for subsequent calls to <a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada" title="Call the reference implementation.">checkasm_call_ref()</a> and <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td>Function pointer (or arbitrary <a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c" title="Opaque type used to identify function implementations.">CheckasmKey</a>) to test, or 0 to skip </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Printf-style format string for the function name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>Format arguments for the function name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Non-zero if testing should proceed, 0 if this function should be skipped</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_define" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(get_my_func(<a class="code hl_function" href="checkasm_8h.html#ac576caad7a9c4333b1b3f34c345ca48b">checkasm_get_cpu_flags</a>()), <span class="stringliteral">&quot;my_func&quot;</span>)) {</div>
<div class="line">    <span class="comment">// checkasm_call_ref() and checkasm_call_new() are now ready to use</span></div>
<div class="line">    <span class="keywordtype">int</span> ref_result = <a class="code hl_define" href="#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a>(args...);</div>
<div class="line">    <span class="keywordtype">int</span> new_result = <a class="code hl_define" href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a>(args...);</div>
<div class="line">    <span class="keywordflow">if</span> (ref_result != new_result) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_define" href="#a771deac0c048cccc98cf872c7a8d36a3">checkasm_fail</a>())</div>
<div class="line">            fprintf(stderr, <span class="stringliteral">&quot;expected %d, got %d\n&quot;</span>, ref_result, new_result);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a>(<span class="stringliteral">&quot;my_func&quot;</span>);</div>
<div class="ttc" id="atest_8h_html_a771deac0c048cccc98cf872c7a8d36a3"><div class="ttname"><a href="#a771deac0c048cccc98cf872c7a8d36a3">checkasm_fail</a></div><div class="ttdeci">#define checkasm_fail()</div><div class="ttdoc">Mark the current test as failed.</div><div class="ttdef"><b>Definition</b> test.h:116</div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="#a13b6395033f856b633f1d2e7a5f81951" title="Function pointer to the reference implementation.">checkasm_func_ref</a>, <a class="el" href="#ae901368af62c0c626ec36aa75bbf4de1" title="Function pointer to the implementation being tested.">checkasm_func_new</a> </dd>
<dd>
<a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada" title="Call the reference implementation.">checkasm_call_ref()</a>, <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a> </dd></dl>

</div>
</div>
<a id="ac14b1acf6ab5851e8fe157b833dbd0a9" name="ac14b1acf6ab5851e8fe157b833dbd0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14b1acf6ab5851e8fe157b833dbd0a9">&#9670;&#160;</a></span>checkasm_declare</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_declare</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ret</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    checkasm_declare_impl(ret, __VA_ARGS__);                                             \</div>
<div class="line">    <span class="keyword">typedef</span> ret func_type(__VA_ARGS__);                                                  \</div>
<div class="line">    (void) ((func_type *) NULL)</div>
</div><!-- fragment -->
<p>Declare a function signature for testing. </p>
<p>Declares the function prototype that will be tested. This must be called before using <a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a>, <a class="el" href="#a22fdeb651a1cc4ecddaef384da98dada" title="Call the reference implementation.">checkasm_call_ref()</a>, or <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a>. The first argument is the return type, and remaining arguments are the function parameters (naming parameters is optional).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret</td><td>Return type of the function </td></tr>
    <tr><td class="paramname">...</td><td>Function parameter types</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="comment">// Declare signature for: int add(int a, int b)</span></div>
<div class="line">declare_func(<span class="keywordtype">int</span>, <span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Can also omit parameter names for brevity:</span></div>
<div class="line">declare_func(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>);</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a>, checkasm_call_call_ref(), <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a> </dd></dl>

</div>
</div>
<a id="a3f7a0ce2c9ff46c217767cd2126de1fc" name="a3f7a0ce2c9ff46c217767cd2126de1fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7a0ce2c9ff46c217767cd2126de1fc">&#9670;&#160;</a></span>checkasm_declare_emms</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_declare_emms</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cpu_flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ret</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code hl_define" href="#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a>(ret, __VA_ARGS__)</div>
<div class="ttc" id="atest_8h_html_ac14b1acf6ab5851e8fe157b833dbd0a9"><div class="ttname"><a href="#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a></div><div class="ttdeci">#define checkasm_declare(ret,...)</div><div class="ttdoc">Declare a function signature for testing.</div><div class="ttdef"><b>Definition</b> test.h:162</div></div>
</div><!-- fragment -->
<p>Declare signature for non-ABI compliant MMX functions (x86 only) </p>
<p>Variant of <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a> for MMX functions that omit calling emms before returning to the caller. This is used for optimized MMX kernels that expect the caller to run emms manually.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cpu_flags</td><td>Mask of CPU flags under which to enable the extra emms call </td></tr>
    <tr><td class="paramname">ret</td><td>Return type of the function </td></tr>
    <tr><td class="paramname">...</td><td>Function parameter types</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>MMX code normally needs to call emms before any floating-point code can be executed. Since this instruction can be very slow, many MMX kernels (used inside loops) are designed to omit emms and instead expect the caller to run emms manually after the loop. This macro will omit the emms check and instead explicitly run emms after calling the function (only when any of the specified cpu_flags are active).</dd>
<dd>
On non-x86 platforms, this is equivalent to <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a> </dd></dl>

</div>
</div>
<a id="a771deac0c048cccc98cf872c7a8d36a3" name="a771deac0c048cccc98cf872c7a8d36a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a771deac0c048cccc98cf872c7a8d36a3">&#9670;&#160;</a></span>checkasm_fail</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_fail</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code hl_function" href="#a648d0f2de88d6aba7a1a99418b8f07ec">checkasm_fail_func</a>(<span class="stringliteral">&quot;%s:%d&quot;</span>, __FILE__, __LINE__)</div>
<div class="ttc" id="atest_8h_html_a648d0f2de88d6aba7a1a99418b8f07ec"><div class="ttname"><a href="#a648d0f2de88d6aba7a1a99418b8f07ec">checkasm_fail_func</a></div><div class="ttdeci">CHECKASM_API int checkasm_fail_func(const char *msg,...) CHECKASM_PRINTF(1</div><div class="ttdoc">Mark the current function as failed with a custom message.</div></div>
</div><!-- fragment -->
<p>Mark the current test as failed. </p>
<p>Records a test failure with the current file and line number. This is the most common way to indicate test failure. The test will continue executing, but any future calls to <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> for this function will return 0.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if the failure details should be printed verbosely, 0 otherwise</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (output != expected) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="#a771deac0c048cccc98cf872c7a8d36a3">checkasm_fail</a>())</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;expected %d, got %d\n&quot;</span>, expected, output);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ae901368af62c0c626ec36aa75bbf4de1" name="ae901368af62c0c626ec36aa75bbf4de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae901368af62c0c626ec36aa75bbf4de1">&#9670;&#160;</a></span>checkasm_func_new</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_func_new&#160;&#160;&#160;((func_type *) <a class="el" href="#a5b65929b4b7cbb7f434111043f0717fc">checkasm_key_new</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer to the implementation being tested. </p>
<p>This is just a typed version of checkasm_key_new, cast to the type declared by <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This is read-only. To test a different function, use <a class="el" href="#aaa899f97e924bbe86341b2c2e4fd161d" title="Call an assembly function with full validation.">checkasm_call_checked()</a> instead of <a class="el" href="#abca61f0321c4258cdc5203c9396fd51a" title="Call the implementation being tested with validation.">checkasm_call_new()</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a13b6395033f856b633f1d2e7a5f81951" title="Function pointer to the reference implementation.">checkasm_func_ref()</a>, <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> </dd></dl>

</div>
</div>
<a id="a13b6395033f856b633f1d2e7a5f81951" name="a13b6395033f856b633f1d2e7a5f81951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b6395033f856b633f1d2e7a5f81951">&#9670;&#160;</a></span>checkasm_func_ref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define checkasm_func_ref&#160;&#160;&#160;((func_type *) <a class="el" href="#a311c987a2fc5ea2ab260151ace94e88d">checkasm_key_ref</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer to the reference implementation. </p>
<p>This is just a typed version of checkasm_key_ref, cast to the type declared by <a class="el" href="#ac14b1acf6ab5851e8fe157b833dbd0a9" title="Declare a function signature for testing.">checkasm_declare()</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ae901368af62c0c626ec36aa75bbf4de1" title="Function pointer to the implementation being tested.">checkasm_func_new()</a>, <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> </dd></dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a648d0f2de88d6aba7a1a99418b8f07ec" name="a648d0f2de88d6aba7a1a99418b8f07ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a648d0f2de88d6aba7a1a99418b8f07ec">&#9670;&#160;</a></span>checkasm_fail_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int checkasm_fail_func </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the current function as failed with a custom message. </p>
<p>Records a test failure with a printf-style formatted message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>Printf-style format string describing the failure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>Format arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the failure details should be printed verbosely, 0 otherwise</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (output != expected)</div>
<div class="line">   <a class="code hl_function" href="#a648d0f2de88d6aba7a1a99418b8f07ec">checkasm_fail_func</a>(<span class="stringliteral">&quot;%s:%d&quot;</span>, filename, line);</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This is typically called via <a class="el" href="#a771deac0c048cccc98cf872c7a8d36a3" title="Mark the current test as failed.">checkasm_fail()</a> rather than directly. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a771deac0c048cccc98cf872c7a8d36a3" title="Mark the current test as failed.">checkasm_fail()</a> </dd></dl>

</div>
</div>
<a id="a62b0579d89e3dff6c36448d06b393505" name="a62b0579d89e3dff6c36448d06b393505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b0579d89e3dff6c36448d06b393505">&#9670;&#160;</a></span>checkasm_report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> void checkasm_report </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>...</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report test outcome for a named group of functions. </p>
<p>Prints the result (pass/fail) for a named group of functions. Typically called at the end of a test, as well as after any larger block of similar functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Printf-style format string for the test case name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">...</td><td>Format arguments</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> w = 4; w &lt; 128; w &lt;&lt;= 1) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(.., <span class="stringliteral">&quot;blockcopy_%dbpc_w%d&quot;</span>, bits, w)) {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a>(<span class="stringliteral">&quot;blockcopy_%dbpc&quot;</span>, bits);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a99afe9b6008a0ffba23777d119de0d6f" name="a99afe9b6008a0ffba23777d119de0d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99afe9b6008a0ffba23777d119de0d6f">&#9670;&#160;</a></span>checkasm_should_fail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="attributes_8h.html#a319a0b6ca88d678f88bc3bb5daa372d3">CHECKASM_API</a> int checkasm_should_fail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="checkasm_8h.html#a0a3a32a2daca43a3aa11a4d067eddb8a">CheckasmCpu</a></td>          <td class="paramname"><span class="paramname"><em>cpu_flags</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a block of tests as expected to fail. </p>
<p>Marks the following test functions as expected to fail when any of the specified CPU flags are set. Returns whether these functions should be executed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cpu_flags</td><td>CPU flags for which failure is expected (or -1 for all) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if functions should be executed, 0 if they should be skipped</dd></dl>
<dl class="section note"><dt>Note</dt><dd>All functions inside such a block <em>must</em> fail, otherwise the whole test will be considered failed. This is used for testing that known-broken implementations are properly detected as broken.</dd>
<dd>
This is not normally useful for end users; it is mainly defined for use inside checkasm's internal test suite.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#a99afe9b6008a0ffba23777d119de0d6f">checkasm_should_fail</a>(CPU_FLAG_SSE2)) {</div>
<div class="line">    <span class="comment">// This implementation is known to be broken on SSE2</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(broken_func_sse2, <span class="stringliteral">&quot;broken_func&quot;</span>)) {</div>
<div class="line">        <a class="code hl_define" href="#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a>(); <span class="comment">// should fail</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="atest_8h_html_a99afe9b6008a0ffba23777d119de0d6f"><div class="ttname"><a href="#a99afe9b6008a0ffba23777d119de0d6f">checkasm_should_fail</a></div><div class="ttdeci">CHECKASM_API int checkasm_should_fail(CheckasmCpu cpu_flags)</div><div class="ttdoc">Mark a block of tests as expected to fail.</div></div>
</div><!-- fragment --> 
</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a5b65929b4b7cbb7f434111043f0717fc" name="a5b65929b4b7cbb7f434111043f0717fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b65929b4b7cbb7f434111043f0717fc">&#9670;&#160;</a></span>checkasm_key_new</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a> checkasm_key_new</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Key identifying the implementation being tested. </p>
<p>Set by <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> to point to the key passed to it.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>, <a class="el" href="#ae901368af62c0c626ec36aa75bbf4de1" title="Function pointer to the implementation being tested.">checkasm_func_new</a>, <a class="el" href="#a311c987a2fc5ea2ab260151ace94e88d" title="Key identifying the reference implementation.">checkasm_key_ref</a> </dd></dl>

</div>
</div>
<a id="a311c987a2fc5ea2ab260151ace94e88d" name="a311c987a2fc5ea2ab260151ace94e88d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311c987a2fc5ea2ab260151ace94e88d">&#9670;&#160;</a></span>checkasm_key_ref</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="checkasm_8h.html#a38851849348fabd0acd8d30b61feeb8c">CheckasmKey</a> checkasm_key_ref</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Key identifying the reference implementation. </p>
<p>Set by <a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a> to point to the reference key for the function currently being tested.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#af89e132503dee480bf6d778f61046083" title="Check if a function should be tested and set up function references.">checkasm_check_func()</a>, <a class="el" href="#a13b6395033f856b633f1d2e7a5f81951" title="Function pointer to the reference implementation.">checkasm_func_ref</a>, <a class="el" href="#a5b65929b4b7cbb7f434111043f0717fc" title="Key identifying the implementation being tested.">checkasm_key_new</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="test_8h.html">test.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
