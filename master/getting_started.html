<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>checkasm: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">checkasm<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Assembly testing and benchmarking framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('getting_started.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This guide will walk you through installing checkasm and writing your first test.</p>
<h1 class="doxsection"><a class="anchor" id="installation"></a>
Installation</h1>
<p>You can either load checkasm as a library (e.g. via <span class="tt">pkg-config</span>), or include it directly in your project's build system.</p>
<h2 class="doxsection"><a class="anchor" id="meson_submodules"></a>
Meson using submodules (recommended)</h2>
<p>First, pull in this project as a git submodule:</p>
<div class="fragment"><div class="line">git submodule init</div>
<div class="line">git submodule add -b release https://code.videolan.org/videolan/checkasm subprojects/checkasm</div>
</div><!-- fragment --><p>Then integrate it into your build system:</p>
<div class="fragment"><div class="line"># This first attempts loading checkasm as an external dependency using the</div>
<div class="line"># appropriate platform-specific method (e.g. pkg-config on POSIX systems),</div>
<div class="line"># and falls back to using the bundled version inside `subprojects/checkasm`</div>
<div class="line"># otherwise.</div>
<div class="line">checkasm_dependency = dependency(&#39;checkasm&#39;,</div>
<div class="line">    # Extracts the `checkasm_dep` variable from the `checkasm` subproject.</div>
<div class="line">    fallback: [&#39;checkasm&#39;, &#39;checkasm_dep&#39;],</div>
<div class="line">    required: false</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"># Alternatively, you can directly force use of the bundled version:</div>
<div class="line"># checkasm_dependency = subproject(&#39;checkasm&#39;).get_variable(&#39;checkasm_dep&#39;)</div>
<div class="line"> </div>
<div class="line">if checkasm_dependency.found()</div>
<div class="line">    checkasm = executable(&#39;checkasm&#39;,</div>
<div class="line">        checkasm_sources,</div>
<div class="line">        dependencies: checkasm_dependency,</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    test(&#39;checkasm&#39;, checkasm, suite: &#39;checkasm&#39;)</div>
<div class="line">    benchmark(&#39;checkasm&#39;, checkasm, suite: &#39;checkasm&#39;, args: &#39;--bench&#39;)</div>
<div class="line">endif</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="meson_wrap"></a>
Meson using wrap files (alternative)</h2>
<p>Create <span class="tt">subprojects/checkasm.wrap</span>:</p>
<div class="fragment"><div class="line">[wrap-git]</div>
<div class="line">url = https://code.videolan.org/videolan/checkasm.git</div>
<div class="line">revision = release</div>
<div class="line">directory = checkasm</div>
</div><!-- fragment --><p>Then declare the dependency in your <span class="tt">meson.build</span> as usual. (See the previous section)</p>
<h2 class="doxsection"><a class="anchor" id="manual_installation"></a>
Manual Installation</h2>
<p>You can also build and install checkasm manually:</p>
<div class="fragment"><div class="line">git clone https://github.com/videolan/checkasm.git &amp;&amp; cd checkasm</div>
<div class="line">meson setup builddir -Dprefix=$PREFIX # (set optional build prefix)</div>
<div class="line">meson compile -C builddir</div>
<div class="line">meson install -C builddir</div>
</div><!-- fragment --><p>This is discouraged in favor of using Meson subprojects or distribution packages, but may be useful inside containerized environments, CI systems or custom build roots.</p>
<h1 class="doxsection"><a class="anchor" id="quick_start"></a>
Quick Start Example</h1>
<p>Let's create a simple test for a vector addition function that operates on buffers.</p>
<h2 class="doxsection"><a class="anchor" id="quick_start1"></a>
1. Prerequisites</h2>
<p>Let's assume you have a reference implementation and an optimized version, alongside a way of detecting CPU features and choosing the implementation based on that:</p>
<div class="fragment"><div class="line"><span class="comment">// my_dsp.h</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    CPU_FLAG_AVX = 1 &lt;&lt; 0,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> detect_cpu_flags(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> void (*add8_func_t)(uint16_t *dst, <span class="keyword">const</span> uint8_t *src1,</div>
<div class="line">                            <span class="keyword">const</span> uint8_t *src2, <span class="keywordtype">size_t</span> len);</div>
<div class="line"> </div>
<div class="line">add8_func_t get_add8_func(<span class="keywordtype">unsigned</span> cpu_flags);</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// my_dsp.c</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;my_cpu.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reference implementation (pure C)</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> add8_c(uint16_t *dst, <span class="keyword">const</span> uint8_t *src1,</div>
<div class="line">                   <span class="keyword">const</span> uint8_t *src2, <span class="keywordtype">size_t</span> len)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; len; i++)</div>
<div class="line">        dst[i] = src1[i] + src2[i];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Optimized implementation (pretend this is assembly)</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> add8_avx(uint16_t *dst, <span class="keyword">const</span> uint8_t *src1,</div>
<div class="line">                     <span class="keyword">const</span> uint8_t *src2, <span class="keywordtype">size_t</span> len)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Assembly optimized version would go here</span></div>
<div class="line">    add8_c(dst, src1, src2, len);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">add8_func_t get_add8_func(<span class="keywordtype">unsigned</span> cpu_flags)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (cpu_flags &amp; CPU_FLAG_AVX)</div>
<div class="line">        <span class="keywordflow">return</span> add8_avx;</div>
<div class="line">    <span class="keywordflow">return</span> add8_c;</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="quick_start2"></a>
2. Write the Test</h2>
<p>Create your test file:</p>
<div class="fragment"><div class="line"><span class="comment">// check_dsp.c</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="checkasm_8h.html">checkasm/checkasm.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="test_8h.html">checkasm/test.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;my_dsp.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define WIDTH 1024</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> test_add8(<span class="keyword">const</span> <a class="code hl_typedef" href="checkasm_8h.html#a0a3a32a2daca43a3aa11a4d067eddb8a">CheckasmCpu</a> cpu)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Declare aligned buffers for testing</span></div>
<div class="line">    <a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint8_t src1[WIDTH]);</div>
<div class="line">    <a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint8_t src2[WIDTH]);</div>
<div class="line">    <a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint16_t dst_c[WIDTH]);</div>
<div class="line">    <a class="code hl_define" href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a>(uint16_t dst_a[WIDTH]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Declare the function signature</span></div>
<div class="line">    <a class="code hl_define" href="test_8h.html#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a>(<span class="keywordtype">void</span>, uint16_t *, <span class="keyword">const</span> uint8_t *, <span class="keyword">const</span> uint8_t *, <span class="keywordtype">size_t</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="test_8h.html#af89e132503dee480bf6d778f61046083">checkasm_check_func</a>(get_add8_func(cpu), <span class="stringliteral">&quot;add_8&quot;</span>)) {</div>
<div class="line">        <span class="comment">// Initialize source buffers with quasi-random test vectors</span></div>
<div class="line">        <a class="code hl_define" href="group__memory.html#gada713cfe880cb426001b9f92faf6f9f1">INITIALIZE_BUF</a>(src1);</div>
<div class="line">        <a class="code hl_define" href="group__memory.html#gada713cfe880cb426001b9f92faf6f9f1">INITIALIZE_BUF</a>(src2);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Test with various buffer sizes</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> w = 1; w &lt;= WIDTH; w &lt;&lt;= 1) {</div>
<div class="line">            <span class="comment">// Clear destination buffers before each test</span></div>
<div class="line">            <a class="code hl_define" href="group__memory.html#gaa4b0d989c5896b64c44a8df25ab4a573">CLEAR_BUF</a>(dst_c);</div>
<div class="line">            <a class="code hl_define" href="group__memory.html#gaa4b0d989c5896b64c44a8df25ab4a573">CLEAR_BUF</a>(dst_a);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Call reference and optimized implementations</span></div>
<div class="line">            <a class="code hl_define" href="test_8h.html#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a>(dst_c, src1, src2, w);</div>
<div class="line">            <a class="code hl_define" href="test_8h.html#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a>(dst_a, src1, src2, w);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Compare results - checkasm_check will report any mismatches</span></div>
<div class="line">            <a class="code hl_define" href="group__bufcmp.html#gaa1b1c38ee8da84d7a12c2171868c8e1d">checkasm_check</a>(uint16_t, dst_c, <span class="comment">/*dst_c_stride=*/</span><span class="keyword">sizeof</span>(dst_c),</div>
<div class="line">                                     dst_a, <span class="comment">/*dst_a_stride=*/</span><span class="keyword">sizeof</span>(dst_a),</div>
<div class="line">                                     <span class="comment">/*width=*/</span>w, <span class="comment">/*height=*/</span>1, <span class="stringliteral">&quot;sum&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Benchmark the optimized version on the largest buffer size</span></div>
<div class="line">        <a class="code hl_define" href="test_8h.html#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a>(<a class="code hl_define" href="test_8h.html#a6f2afbd0d6c3ba180d49cc9396543463">checkasm_alternate</a>(dst_c, dst_a), src1, src2, WIDTH);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> check_dsp(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_typedef" href="checkasm_8h.html#a0a3a32a2daca43a3aa11a4d067eddb8a">CheckasmCpu</a> cpu = <a class="code hl_function" href="checkasm_8h.html#ac576caad7a9c4333b1b3f34c345ca48b">checkasm_get_cpu_flags</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Test all related functions and report as a single function group</span></div>
<div class="line">    test_add8(cpu);</div>
<div class="line">    <span class="comment">// test_add16(cpu);</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <a class="code hl_function" href="test_8h.html#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a>(<span class="stringliteral">&quot;add&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check more function groups</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Test registry</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="structCheckasmTest.html">CheckasmTest</a> tests[] = {</div>
<div class="line">    { <span class="stringliteral">&quot;dsp&quot;</span>, check_dsp },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// CPU flag registry</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="structCheckasmCpuInfo.html">CheckasmCpuInfo</a> cpu_flags[] = {</div>
<div class="line">    { <span class="stringliteral">&quot;AVX&quot;</span>, <span class="stringliteral">&quot;avx&quot;</span>, CPU_FLAG_AVX },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">    <a class="code hl_struct" href="structCheckasmConfig.html">CheckasmConfig</a> config = {</div>
<div class="line">        .tests        = tests,</div>
<div class="line">        .nb_tests     = 1,</div>
<div class="line">        .cpu_flags    = cpu_flags,</div>
<div class="line">        .nb_cpu_flags = 1,</div>
<div class="line">        .cpu          = detect_cpu_flags(),</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="checkasm_8h.html#ad5e8c582a37cc0aa34ade4ebe2ea1568">checkasm_main</a>(&amp;config, argc, argv);</div>
<div class="line">}</div>
<div class="ttc" id="acheckasm_8h_html"><div class="ttname"><a href="checkasm_8h.html">checkasm.h</a></div><div class="ttdoc">Main checkasm API for test suite configuration and execution.</div></div>
<div class="ttc" id="acheckasm_8h_html_a0a3a32a2daca43a3aa11a4d067eddb8a"><div class="ttname"><a href="checkasm_8h.html#a0a3a32a2daca43a3aa11a4d067eddb8a">CheckasmCpu</a></div><div class="ttdeci">uint64_t CheckasmCpu</div><div class="ttdoc">Opaque type representing a set of CPU feature flags.</div><div class="ttdef"><b>Definition</b> checkasm.h:52</div></div>
<div class="ttc" id="acheckasm_8h_html_ac576caad7a9c4333b1b3f34c345ca48b"><div class="ttname"><a href="checkasm_8h.html#ac576caad7a9c4333b1b3f34c345ca48b">checkasm_get_cpu_flags</a></div><div class="ttdeci">CHECKASM_API CheckasmCpu checkasm_get_cpu_flags(void)</div><div class="ttdoc">Get the current active set of CPU flags.</div></div>
<div class="ttc" id="acheckasm_8h_html_ad5e8c582a37cc0aa34ade4ebe2ea1568"><div class="ttname"><a href="checkasm_8h.html#ad5e8c582a37cc0aa34ade4ebe2ea1568">checkasm_main</a></div><div class="ttdeci">CHECKASM_API int checkasm_main(CheckasmConfig *config, int argc, const char *argv[])</div><div class="ttdoc">Main entry point for checkasm test programs.</div></div>
<div class="ttc" id="agroup__bufcmp_html_gaa1b1c38ee8da84d7a12c2171868c8e1d"><div class="ttname"><a href="group__bufcmp.html#gaa1b1c38ee8da84d7a12c2171868c8e1d">checkasm_check</a></div><div class="ttdeci">#define checkasm_check(type,...)</div><div class="ttdoc">Compare two 2D buffers and fail test if different.</div><div class="ttdef"><b>Definition</b> utils.h:480</div></div>
<div class="ttc" id="agroup__bufcmp_html_gaf24227824feb841da0ad5b245c89cbf3"><div class="ttname"><a href="group__bufcmp.html#gaf24227824feb841da0ad5b245c89cbf3">CHECKASM_ALIGN</a></div><div class="ttdeci">#define CHECKASM_ALIGN(x)</div><div class="ttdoc">Declare a variable with platform-specific alignment requirements.</div><div class="ttdef"><b>Definition</b> utils.h:408</div></div>
<div class="ttc" id="agroup__memory_html_gaa4b0d989c5896b64c44a8df25ab4a573"><div class="ttname"><a href="group__memory.html#gaa4b0d989c5896b64c44a8df25ab4a573">CLEAR_BUF</a></div><div class="ttdeci">#define CLEAR_BUF(buf)</div><div class="ttdoc">Clear a fixed size buffer (convenience macro)</div><div class="ttdef"><b>Definition</b> utils.h:254</div></div>
<div class="ttc" id="agroup__memory_html_gada713cfe880cb426001b9f92faf6f9f1"><div class="ttname"><a href="group__memory.html#gada713cfe880cb426001b9f92faf6f9f1">INITIALIZE_BUF</a></div><div class="ttdeci">#define INITIALIZE_BUF(buf)</div><div class="ttdoc">Fill a fixed size buffer with pathological test data (convenience macro)</div><div class="ttdef"><b>Definition</b> utils.h:269</div></div>
<div class="ttc" id="astructCheckasmConfig_html"><div class="ttname"><a href="structCheckasmConfig.html">CheckasmConfig</a></div><div class="ttdoc">Configuration structure for the checkasm test suite.</div><div class="ttdef"><b>Definition</b> checkasm.h:124</div></div>
<div class="ttc" id="astructCheckasmCpuInfo_html"><div class="ttname"><a href="structCheckasmCpuInfo.html">CheckasmCpuInfo</a></div><div class="ttdoc">Describes a CPU feature flag/capability.</div><div class="ttdef"><b>Definition</b> checkasm.h:69</div></div>
<div class="ttc" id="astructCheckasmTest_html"><div class="ttname"><a href="structCheckasmTest.html">CheckasmTest</a></div><div class="ttdoc">Describes a single test function.</div><div class="ttdef"><b>Definition</b> checkasm.h:81</div></div>
<div class="ttc" id="atest_8h_html"><div class="ttname"><a href="test_8h.html">test.h</a></div><div class="ttdoc">Test writing API for checkasm.</div></div>
<div class="ttc" id="atest_8h_html_a012d866e2f2a5f5ede4b9c2765248e28"><div class="ttname"><a href="test_8h.html#a012d866e2f2a5f5ede4b9c2765248e28">checkasm_bench_new</a></div><div class="ttdeci">#define checkasm_bench_new(...)</div><div class="ttdoc">Benchmark the optimized implementation.</div><div class="ttdef"><b>Definition</b> test.h:406</div></div>
<div class="ttc" id="atest_8h_html_a22fdeb651a1cc4ecddaef384da98dada"><div class="ttname"><a href="test_8h.html#a22fdeb651a1cc4ecddaef384da98dada">checkasm_call_ref</a></div><div class="ttdeci">#define checkasm_call_ref(...)</div><div class="ttdoc">Call the reference implementation.</div><div class="ttdef"><b>Definition</b> test.h:325</div></div>
<div class="ttc" id="atest_8h_html_a62b0579d89e3dff6c36448d06b393505"><div class="ttname"><a href="test_8h.html#a62b0579d89e3dff6c36448d06b393505">checkasm_report</a></div><div class="ttdeci">CHECKASM_API void checkasm_report(const char *name,...) CHECKASM_PRINTF(1</div><div class="ttdoc">Report test outcome for a named group of functions.</div></div>
<div class="ttc" id="atest_8h_html_a6f2afbd0d6c3ba180d49cc9396543463"><div class="ttname"><a href="test_8h.html#a6f2afbd0d6c3ba180d49cc9396543463">checkasm_alternate</a></div><div class="ttdeci">#define checkasm_alternate(a, b)</div><div class="ttdoc">Alternate between two values during benchmarking.</div><div class="ttdef"><b>Definition</b> test.h:428</div></div>
<div class="ttc" id="atest_8h_html_abca61f0321c4258cdc5203c9396fd51a"><div class="ttname"><a href="test_8h.html#abca61f0321c4258cdc5203c9396fd51a">checkasm_call_new</a></div><div class="ttdeci">#define checkasm_call_new(...)</div><div class="ttdoc">Call the implementation being tested with validation.</div><div class="ttdef"><b>Definition</b> test.h:340</div></div>
<div class="ttc" id="atest_8h_html_ac14b1acf6ab5851e8fe157b833dbd0a9"><div class="ttname"><a href="test_8h.html#ac14b1acf6ab5851e8fe157b833dbd0a9">checkasm_declare</a></div><div class="ttdeci">#define checkasm_declare(ret,...)</div><div class="ttdoc">Declare a function signature for testing.</div><div class="ttdef"><b>Definition</b> test.h:149</div></div>
<div class="ttc" id="atest_8h_html_af89e132503dee480bf6d778f61046083"><div class="ttname"><a href="test_8h.html#af89e132503dee480bf6d778f61046083">checkasm_check_func</a></div><div class="ttdeci">#define checkasm_check_func(func,...)</div><div class="ttdoc">Check if a function should be tested and set up function references.</div><div class="ttdef"><b>Definition</b> test.h:309</div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="quick_start3"></a>
3. Build and Run</h2>
<div class="fragment"><div class="line"># Compile (example using gcc directly)</div>
<div class="line">gcc -o check_dsp my_dsp.c check_dsp.c $(pkg-config --cflags --libs checkasm)</div>
<div class="line"># or use `meson compile` if using Meson</div>
<div class="line"> </div>
<div class="line"># Run all tests</div>
<div class="line">./check_dsp</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="options"></a>
Command-Line Options</h1>
<p>checkasm provides several useful command-line options:</p>
<div class="fragment"><div class="line"># List all available functions</div>
<div class="line">./checkasm --list-functions</div>
<div class="line"> </div>
<div class="line"># Run specific functions (supports wildcards)</div>
<div class="line">./checkasm --function=add_*_8bpc</div>
<div class="line"> </div>
<div class="line"># Run benchmarks</div>
<div class="line">./checkasm --bench</div>
<div class="line"> </div>
<div class="line"># Run specified test with higher benchmark duration (here: 10 ms)</div>
<div class="line">./checkasm --test=pixel --bench --duration=10000</div>
<div class="line"> </div>
<div class="line"># Enable verbose output</div>
<div class="line">./checkasm --verbose</div>
</div><!-- fragment --><p>The <span class="tt">--help</span> output shows all available options:</p>
<div class="fragment"><div class="line">Usage: checkasm [options...] &lt;random seed&gt;</div>
<div class="line">    &lt;random seed&gt;              Use fixed value to seed the PRNG</div>
<div class="line">Options:</div>
<div class="line">    --affinity=&lt;cpu&gt;           Run the process on CPU &lt;cpu&gt;</div>
<div class="line">    --bench -b                 Benchmark the tested functions</div>
<div class="line">    --csv, --tsv, --json,      Choose output format <span class="keywordflow">for</span> benchmarks</div>
<div class="line">    --html</div>
<div class="line">    --function=&lt;pattern&gt; -f    Test only the functions matching &lt;pattern&gt;</div>
<div class="line">    --help -h                  Print <span class="keyword">this</span> usage info</div>
<div class="line">    --list-cpu-flags           List available cpu flags</div>
<div class="line">    --list-functions           List available functions</div>
<div class="line">    --list-tests               List available tests</div>
<div class="line">    --duration=&lt;μs&gt;            Benchmark duration (per function) in μs</div>
<div class="line">    --repeat[=&lt;N&gt;]             Repeat tests N times, on successive seeds</div>
<div class="line">    --test=&lt;pattern&gt; -t        Test only &lt;pattern&gt;</div>
<div class="line">    --verbose -v               Print verbose timing info and failure data</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="getting_started_next_steps"></a>
Next Steps</h1>
<p>Now that you've set up checkasm and written your first test, learn how to integrate it properly with your project's CPU detection and dispatch mechanisms.</p>
<p><b>Next:</b> <a class="el" href="integration.html">Integration Guide</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
